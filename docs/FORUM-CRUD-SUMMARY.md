# Forum CRUD - –°–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò–∑—É—á–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–¢–∞–±–ª–∏—Ü—ã –∏ —Å–≤—è–∑–∏:**
- `Forums` - –≥–ª–∞–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ñ–æ—Ä—É–º–æ–≤
- `forum_comments` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (FK -> Forums CASCADE DELETE)
- `forum_likes` - –ª–∞–π–∫–∏ (FK -> Forums CASCADE DELETE)
- `forum_views` - –ø—Ä–æ—Å–º–æ—Ç—Ä—ã (FK -> Forums CASCADE DELETE)
- `forum_categories` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ñ–æ—Ä—É–º–æ–≤
- `Trainers` - –∞–≤—Ç–æ—Ä—ã —Ñ–æ—Ä—É–º–æ–≤
- `Users` - –∞–≤—Ç–æ—Ä—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

**–°–≤—è–∑–∏:**
```
Forums (1) -> (N) forum_comments [CASCADE DELETE]
Forums (1) -> (N) forum_likes [CASCADE DELETE]
Forums (1) -> (N) forum_views [CASCADE DELETE]
Forums (N) -> (1) Trainers [author_id]
Forums (N) -> (1) forum_categories [category_id]
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã DTO

**–§–∞–π–ª:** `server/src/forum/dto/forum.dto.ts`

–î–æ–±–∞–≤–ª–µ–Ω—ã:
- `CreateForumDto` - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–æ—Ä—É–º–∞
- `UpdateForumDto` - –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä—É–º–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ class-validator

### 3. –†–∞—Å—à–∏—Ä–µ–Ω ForumService

**–§–∞–π–ª:** `server/src/forum/forum.service.ts`

–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
- ‚úÖ `getAll()` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ñ–æ—Ä—É–º—ã —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- ‚úÖ `getOne(id)` - –ø–æ–ª—É—á–∏—Ç—å –æ–¥–∏–Ω —Ñ–æ—Ä—É–º —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- ‚úÖ `create(dto)` - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–æ—Ä—É–º
- ‚úÖ `update(id, dto, userId)` - –æ–±–Ω–æ–≤–∏—Ç—å —Ñ–æ—Ä—É–º (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä)
- ‚úÖ `delete(id, userId)` - —É–¥–∞–ª–∏—Ç—å —Ñ–æ—Ä—É–º —Å –∫–∞—Å–∫–∞–¥–Ω—ã–º —É–¥–∞–ª–µ–Ω–∏–µ–º (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä)
- ‚úÖ `togglePin(id)` - –∑–∞–∫—Ä–µ–ø–∏—Ç—å/–æ—Ç–∫—Ä–µ–ø–∏—Ç—å —Ñ–æ—Ä—É–º
- ‚úÖ `updateStatus(id, status)` - –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ñ–æ—Ä—É–º–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å)
- –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –ª–∞–π–∫–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä—ã)
- –í–∫–ª—é—á–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∞–≤—Ç–æ—Ä, –∫–∞—Ç–µ–≥–æ—Ä–∏—è)

### 4. –û–±–Ω–æ–≤–ª–µ–Ω ForumController

**–§–∞–π–ª:** `server/src/forum/forum.controller.ts`

–î–æ–±–∞–≤–ª–µ–Ω—ã endpoints:
- `GET /api/forum/all` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ñ–æ—Ä—É–º—ã (–ø—É–±–ª–∏—á–Ω—ã–π)
- `GET /api/forum/:id` - –ø–æ–ª—É—á–∏—Ç—å –æ–¥–∏–Ω —Ñ–æ—Ä—É–º (–ø—É–±–ª–∏—á–Ω—ã–π)
- `POST /api/forum` - —Å–æ–∑–¥–∞—Ç—å —Ñ–æ—Ä—É–º (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
- `PUT /api/forum/:id` - –æ–±–Ω–æ–≤–∏—Ç—å —Ñ–æ—Ä—É–º (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä)
- `DELETE /api/forum/:id` - —É–¥–∞–ª–∏—Ç—å —Ñ–æ—Ä—É–º (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä)
- `PUT /api/forum/:id/toggle-pin` - –∑–∞–∫—Ä–µ–ø–∏—Ç—å/–æ—Ç–∫—Ä–µ–ø–∏—Ç—å (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
- `PUT /api/forum/:id/status` - –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

**–ó–∞—â–∏—Ç–∞:**
- JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `JwtAuthGuard`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–∏—Å–∞

### 5. –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–æ—Ä—É–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è:
1. ‚úÖ –í—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–≤–∫–ª—é—á–∞—è –≤–ª–æ–∂–µ–Ω–Ω—ã–µ)
2. ‚úÖ –í—Å–µ –ª–∞–π–∫–∏
3. ‚úÖ –í—Å–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã

**–ö–æ–¥:**
```typescript
// –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
await Comment.destroy({ where: { forum_id: id } });

// –£–¥–∞–ª—è–µ–º –≤—Å–µ –ª–∞–π–∫–∏
await ForumLike.destroy({ where: { forum_id: id } });

// –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã
await ForumView.destroy({ where: { forum_id: id } });

// –£–¥–∞–ª—è–µ–º —Å–∞–º —Ñ–æ—Ä—É–º
await forum.destroy();
```

### 6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:
- `docs/FORUM-CRUD-API.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- `docs/FORUM-TESTING.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- `docs/FORUM-CRUD-SUMMARY.md` - —ç—Ç–∞ —Å–≤–æ–¥–∫–∞

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ä—É–º–∞ - —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—Ç—Ä–µ–Ω–µ—Ä—ã)
‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä—É–º–∞ - —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä
‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ä—É–º–∞ - —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä
‚úÖ JWT —Ç–æ–∫–µ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ guard
‚úÖ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ—Ä–µ—Ç—Å—è –∏–∑ —Ç–æ–∫–µ–Ω–∞, –∞ –Ω–µ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
cd server
npm run start:dev
```

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ endpoints —Å–æ–≥–ª–∞—Å–Ω–æ `docs/FORUM-TESTING.md`

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞—Ç—å —Ñ–æ—Ä—É–º
```bash
curl -X POST http://localhost:3000/api/forum \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–ù–æ–≤—ã–π —Ñ–æ—Ä—É–º",
    "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
    "category_id": 1
  }'
```

### –£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ä—É–º (–∫–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)
```bash
curl -X DELETE http://localhost:3000/api/forum/1 \
  -H "Authorization: Bearer TOKEN"
```

–û—Ç–≤–µ—Ç:
```json
{
  "message": "–§–æ—Ä—É–º —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω –≤–º–µ—Å—Ç–µ —Å 5 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏, 10 –ª–∞–π–∫–∞–º–∏ –∏ 100 –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º–∏"
}
```

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. ‚úÖ `server/src/forum/dto/forum.dto.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã DTO
2. ‚úÖ `server/src/forum/forum.service.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã CRUD –º–µ—Ç–æ–¥—ã
3. ‚úÖ `server/src/forum/forum.controller.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã endpoints
4. ‚úÖ `docs/FORUM-CRUD-API.md` - —Å–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
5. ‚úÖ `docs/FORUM-TESTING.md` - —Å–æ–∑–¥–∞–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
6. ‚úÖ `docs/FORUM-CRUD-SUMMARY.md` - —Å–æ–∑–¥–∞–Ω–∞ —Å–≤–æ–¥–∫–∞

## –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ
